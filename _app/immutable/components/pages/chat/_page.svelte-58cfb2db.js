import{S as X,i as Y,s as Z,l as b,a as M,m as w,p as x,h as _,c as V,q as k,b as C,H as y,f as T,g as ot,d as it,t as N,R as q,o as rt,e as B,x as tt,y as et,z as st,A as nt,u as W,v as A,w as H,K as G,n as lt}from"../../../chunks/index-1d50e03e.js";import{B as at}from"../../../chunks/Button-21dca69e.js";class O{constructor(t,e){this.incoming=t,this.text=e}}function U(i,t,e){const n=i.slice();return n[9]=t[e],n[11]=e,n}function j(i,t,e){const n=i.slice();return n[12]=t[e],n[11]=e,n}function ct(i){let t,e,n=i[12].text+"",s;return{c(){t=b("div"),e=b("p"),s=W(n),this.h()},l(o){t=w(o,"DIV",{class:!0});var l=x(t);e=w(l,"P",{class:!0});var a=x(e);s=A(a,n),a.forEach(_),l.forEach(_),this.h()},h(){k(e,"class","user svelte-3ooil4"),k(t,"class","message message-right svelte-3ooil4")},m(o,l){C(o,t,l),y(t,e),y(e,s)},p(o,l){l&2&&n!==(n=o[12].text+"")&&H(s,n)},d(o){o&&_(t)}}}function ht(i){var h;let t,e,n=i[12].text+"",s,o,l,a=!((h=i[1][i[11]+1])!=null&&h.incoming)&&z(i);return{c(){t=b("div"),e=b("p"),s=W(n),o=M(),a&&a.c(),l=B(),this.h()},l(u){t=w(u,"DIV",{class:!0});var p=x(t);e=w(p,"P",{class:!0});var v=x(e);s=A(v,n),v.forEach(_),p.forEach(_),o=V(u),a&&a.l(u),l=B(),this.h()},h(){k(e,"class","svelte-3ooil4"),k(t,"class","message message-left svelte-3ooil4")},m(u,p){C(u,t,p),y(t,e),y(e,s),C(u,o,p),a&&a.m(u,p),C(u,l,p)},p(u,p){var v;p&2&&n!==(n=u[12].text+"")&&H(s,n),(v=u[1][u[11]+1])!=null&&v.incoming?a&&(a.d(1),a=null):a?a.p(u,p):(a=z(u),a.c(),a.m(l.parentNode,l))},d(u){u&&_(t),u&&_(o),a&&a.d(u),u&&_(l)}}}function z(i){let t,e;return{c(){t=b("img"),this.h()},l(n){t=w(n,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){k(t,"class","message-img svelte-3ooil4"),G(t.src,e=i[0])||k(t,"src",e),k(t,"alt","")},m(n,s){C(n,t,s)},p(n,s){s&1&&!G(t.src,e=n[0])&&k(t,"src",e)},d(n){n&&_(t)}}}function F(i){let t;function e(o,l){return o[12].incoming?ht:ct}let n=e(i),s=n(i);return{c(){s.c(),t=B()},l(o){s.l(o),t=B()},m(o,l){s.m(o,l),C(o,t,l)},p(o,l){n===(n=e(o))&&s?s.p(o,l):(s.d(1),s=n(o),s&&(s.c(),s.m(t.parentNode,t)))},d(o){s.d(o),o&&_(t)}}}function ut(i){let t=i[9].text+"",e,n;return{c(){e=W(t),n=M()},l(s){e=A(s,t),n=V(s)},m(s,o){C(s,e,o),C(s,n,o)},p(s,o){o&4&&t!==(t=s[9].text+"")&&H(e,t)},d(s){s&&_(e),s&&_(n)}}}function J(i){let t,e;function n(){return i[5](i[11])}return t=new at({props:{onClick:n,style:"border: 2px solid white; font-weight: bold;",$$slots:{default:[ut]},$$scope:{ctx:i}}}),{c(){tt(t.$$.fragment)},l(s){et(t.$$.fragment,s)},m(s,o){st(t,s,o),e=!0},p(s,o){i=s;const l={};o&16388&&(l.$$scope={dirty:o,ctx:i}),t.$set(l)},i(s){e||(T(t.$$.fragment,s),e=!0)},o(s){N(t.$$.fragment,s),e=!1},d(s){nt(t,s)}}}function ft(i){let t,e,n,s,o,l,a,h,u,p,v=i[1],f=[];for(let c=0;c<v.length;c+=1)f[c]=F(j(i,v,c));let E=i[2],m=[];for(let c=0;c<E.length;c+=1)m[c]=J(U(i,E,c));const D=c=>N(m[c],1,1,()=>{m[c]=null});return{c(){t=b("div"),e=b("div"),n=b("div"),s=M(),o=b("div");for(let c=0;c<f.length;c+=1)f[c].c();l=M(),a=b("div"),h=M(),u=b("div");for(let c=0;c<m.length;c+=1)m[c].c();this.h()},l(c){t=w(c,"DIV",{class:!0});var d=x(t);e=w(d,"DIV",{class:!0});var r=x(e);n=w(r,"DIV",{class:!0}),x(n).forEach(_),s=V(r),o=w(r,"DIV",{class:!0});var I=x(o);for(let $=0;$<f.length;$+=1)f[$].l(I);l=V(I),a=w(I,"DIV",{id:!0,class:!0}),x(a).forEach(_),I.forEach(_),r.forEach(_),h=V(d),u=w(d,"DIV",{class:!0});var R=x(u);for(let $=0;$<m.length;$+=1)m[$].l(R);R.forEach(_),d.forEach(_),this.h()},h(){k(n,"class","scroll-padding-top svelte-3ooil4"),k(a,"id","bottom"),k(a,"class","svelte-3ooil4"),k(o,"class","messages-wrapper svelte-3ooil4"),k(e,"class","scroll-wrapper svelte-3ooil4"),k(u,"class","choices-wrapper svelte-3ooil4"),k(t,"class","window svelte-3ooil4")},m(c,d){C(c,t,d),y(t,e),y(e,n),y(e,s),y(e,o);for(let r=0;r<f.length;r+=1)f[r].m(o,null);y(o,l),y(o,a),y(t,h),y(t,u);for(let r=0;r<m.length;r+=1)m[r].m(u,null);p=!0},p(c,[d]){if(d&3){v=c[1];let r;for(r=0;r<v.length;r+=1){const I=j(c,v,r);f[r]?f[r].p(I,d):(f[r]=F(I),f[r].c(),f[r].m(o,l))}for(;r<f.length;r+=1)f[r].d(1);f.length=v.length}if(d&12){E=c[2];let r;for(r=0;r<E.length;r+=1){const I=U(c,E,r);m[r]?(m[r].p(I,d),T(m[r],1)):(m[r]=J(I),m[r].c(),T(m[r],1),m[r].m(u,null))}for(ot(),r=E.length;r<m.length;r+=1)D(r);it()}},i(c){if(!p){for(let d=0;d<E.length;d+=1)T(m[d]);p=!0}},o(c){m=m.filter(Boolean);for(let d=0;d<m.length;d+=1)N(m[d]);p=!1},d(c){c&&_(t),q(f,c),q(m,c)}}}function mt(i,t,e){let{imgSrc:n}=t,{prat:s}=t,o=[],l=[];const a=f=>{e(1,o=[...o,f])},h=()=>{for(e(2,l=s.getChoices());l.length===0;)s.input(""),a(new O(!0,s.getLine().text)),e(2,l=s.getChoices())},u=()=>setTimeout(()=>document.getElementById("bottom").scrollIntoView({block:"end",behavior:"smooth"}),100),p=f=>{s.input(f),a(new O(!1,s.getLine().text)),h(),u()};a(new O(!0,s.getLine().text)),h(),rt(()=>{u()});const v=f=>p(`${f}`);return i.$$set=f=>{"imgSrc"in f&&e(0,n=f.imgSrc),"prat"in f&&e(4,s=f.prat)},[n,o,l,p,s,v]}class dt extends X{constructor(t){super(),Y(this,t,mt,ft,Z,{imgSrc:0,prat:4})}}class g{}g.key="#";g.author="@";g.goto=">";g.condition="?";g.action="!";g.comment="%";g.left="{";g.right="}";const Q=(i,t)=>{let e=0;for(;i[e]==t;)e+=1;return e},gt=(i,t,e)=>{if(!i.includes(t)&&i.includes(e))return{extraction:"",rest:i};let n=i.indexOf(t)+t.length,s=-1,o=0;for(let a=n;a<i.length;a++){const h=i.substring(a);if(!o&&h.startsWith(e)){s=a;break}o+=h.startsWith(g.left)?1:0,o-=h.startsWith(g.right)?1:0}if(s===-1)return{extraction:"",rest:i};const l=i.substring(n,s);return{extraction:l,rest:i.replace(t+l+e,"")}},S=(i,t)=>gt(i,t+g.left,g.right),K=i=>S(i,g.key).extraction,L=i=>i==null||i.trim()==="";class pt{constructor(t,e,n,s,o,l,a,h){this.key=t,this.text=e,this.author=n,this.goto=s,this.choices=o,this.condition=l,this.action=a,this.comment=h}toString(){return this.author.length>0?this.author+": "+this.text:this.text}getChoices(t){return[...t.lines.values()].filter(e=>this.choices.includes(e.key))}}class P{constructor(t,e){this.lines=t,this.setKey(e),this.key=e}static fromString(t){t=t.replace(`\\
	`,`\\
`),t=t.replace(`\\
`,"");const e=t.split(`
`).filter(o=>!L(o));e.forEach((o,l)=>{if(L(K(o))){const a=g.key+g.left+g.key+l+g.right;e[l]=o+a}});const n=new Map;let s="";return e.forEach((o,l)=>{const a=[];let h;h=S(o,g.goto);let u=h.extraction;if(L(u)){const D=Q(o,"	");if(D%2==0){let c=D;for(let d=l+1;d<e.length;d++){const r=Q(e[d],"	");if(c=Math.min(r,c),r<=c){if(a.length>0)break;if(r%2==0){u=K(e[d]);break}}r==D+1&&D==c&&a.push(K(e[d]))}}else l+1<e.length&&(u=K(e[l+1]))}h=S(h.rest,g.key);const p=h.extraction;h=S(h.rest,g.author);const v=L(h.extraction)?s:h.extraction;h=S(h.rest,g.condition);const f=h.extraction;h=S(h.rest,g.action);const E=h.extraction;h=S(h.rest,g.comment);const m=h.extraction;n.set(p,new pt(p,h.rest.trim(),v,u,a,f,E,m)),s=v}),new P(n,K(e[0]))}getLine(){let t=this.lines.get(this.key);if(t==null)throw new Error(`Invalid key <${this.key}>.`);for(;L(t==null?void 0:t.text);)if(this.setKey(t.goto),t=this.lines.get(this.key),t==null)throw new Error(`Invalid key <${this.key}>.`);return t}getChoices(){return this.getLine().getChoices(this)}getLineAndChoices(){const t=this.getLine();let e=t.toString()+`
`;return t.getChoices(this).forEach((n,s)=>{e+=s+" "+n+`
`}),e}input(t){const e=this.lines.get(this.key);if(e==null)return"ERROR: Invalid key!";const n=e.getChoices(this);if(n.length>0)try{this.setKey(n[parseInt(t)].key)}catch{this.setKey(n[0].key)}else this.setKey(e.goto)}setKey(t){if(!this.lines.has(t))throw new Error("Key is not valid!");this.key=t}}const _t=`%{ For chat feature on magne.dev }

Hey, I'm Magne Tenstad \u{1F44B}
#{start}
What would you like to know?
	Work
		I currently work for Norsonic and NTNU. However, I am open to work this summer.
			Contact about work
				Send me an email at work@magne.dev
					Sure!
						>{start}
			Ok
				>{start}
	Hobbies
		#{hobbies}
		%{ I've always like to create things. Back in elementary school, I liked to draw and paint, both traditionally and digitally. In middle school, I was introduced to game programming, and in high school I started publishing games. Since then, I've had a growing interest for all kinds of software. }
		My main creative hobbies over the years, have been programming\u{1F4BB}, games\u{1F3AE}, and art\u{1F58C}\uFE0F.
			Software
				>{hobbies}
			Games
				>{hobbies}
			Art
				>{hobbies}
			Ok
				>{start}
	School
		I study Computer Science at NTNU in Trondheim.
			Ok
				>{start}
Thank you for your interest!
	Tell me more!
		>{start}
`;function vt(i){let t,e;return t=new dt({props:{imgSrc:kt,prat:i[0]}}),{c(){tt(t.$$.fragment)},l(n){et(t.$$.fragment,n)},m(n,s){st(t,n,s),e=!0},p:lt,i(n){e||(T(t.$$.fragment,n),e=!0)},o(n){N(t.$$.fragment,n),e=!1},d(n){nt(t,n)}}}const kt="https://avatars.githubusercontent.com/u/46494695";function yt(i){return[P.fromString(_t)]}class It extends X{constructor(t){super(),Y(this,t,yt,vt,Z,{})}}export{It as default};
